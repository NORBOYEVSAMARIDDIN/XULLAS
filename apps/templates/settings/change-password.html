{% extends "settings/base.html" %}
{% load static %}
{% block title %}Change Password{% endblock %}
{% block css %}
{#<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">#}
{% endblock %}
{% block content %}
    <h1 class="h4 mb-3">Personal Information</h1>
    <div class="d-flex flex-wrap gap-4 mb-5">
        <a href="{% url 'users:upload_photo' %}" class="text-primary text-decoration-none">Upload Photo</a>
        <a href="{% url 'users:read_profile' %}" class="text-primary text-decoration-none">Edit Profile</a>
        <a href="{% url 'users:read_country' %}" class="text-primary text-decoration-none">Country/Region</a>
        <a href="#" class="text-danger text-decoration-none">Delete Account</a>
    </div>

<div class="account-section">
    <div style="max-width: 500px;">
        <h2 class="h5 mb-4">Change Password</h2>

        <form method="post" class="p-4 border rounded shadow-sm bg-white">
            {% csrf_token %}

            <div class="mb-3 position-relative">
                <label for="id_password" class="form-label">Current Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="id_password" name="password" placeholder="Enter current password" required>
                    <span class="input-group-text" onclick="togglePassword('id_password', this)">
                        <i class="fa fa-eye"></i>
                    </span>
                </div>
            </div>

            <div class="mb-3 position-relative">
                <label for="id_new_password" class="form-label">New Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="id_new_password" name="new_password" placeholder="Enter new password" required>
                    <span class="input-group-text" onclick="togglePassword('id_new_password', this)">
                        <i class="fa fa-eye"></i>
                    </span>
                </div>
            </div>

            <div class="mb-3 position-relative">
                <label for="id_confirm_password" class="form-label">Confirm New Password</label>
                <div class="input-group">
                    <input type="password" class="form-control" id="id_confirm_password" name="confirm_password" placeholder="Confirm new password" required>
                    <span class="input-group-text" onclick="togglePassword('id_confirm_password', this)">
                        <i class="fa fa-eye"></i>
                    </span>
                </div>
            </div>


            <button type="submit" class="btn btn-primary w-100">Change Password</button>
        </form>
    </div>
</div>

<script>
function togglePassword(inputId, el) {
    const input = document.getElementById(inputId);
    const icon = el.querySelector('i');

    if (input.type === "password") {
        input.type = "text";
        icon.classList.remove("fa-eye");
        icon.classList.add("fa-eye-slash");
    } else {
        input.type = "password";
        icon.classList.remove("fa-eye-slash");
        icon.classList.add("fa-eye");
    }
}
</script>

{% endblock %}